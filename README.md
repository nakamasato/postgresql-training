# Postgres Training

## Cheatsheet

Explain

1. [Sequential Scan](https://pganalyze.com/docs/explain/scan-nodes/sequential-scan): *This is the simplest way of fetching data from a table: it scans through every page of data sequentially* (important fields: **Filter**, **Rows Removed by Filter**
2. [Index Scan](https://pganalyze.com/docs/explain/scan-nodes/index-scan): *An index scan uses an index to find either a specific row, or all rows matching a predicate.* (important fields: **Filter**, **Index Cond**, **Rows Removed by Filter**, **Rows Removed by Index Recheck**, **Scan Direction**)
3. [Bitmap Heap Scan](https://pganalyze.com/docs/explain/scan-nodes/bitmap-heap-scan): *A bitmap heap scan takes a row location bitmap generated by a Bitmap Index Scan (either directly, or through a series of bitmap set operations via BitmapAnd and BitmapOr nodes) and looks up the relevant data.* (important fields: Exact Heap Blocks, Filter, Lossy Heap Blocks, Recheck Cond, Rows Removed by Filter, Rows Removed by Index Recheck)
4. [Bitmap Index Scan](https://pganalyze.com/docs/explain/scan-nodes/bitmap-index-scan): *a bitmap index scan as a middle ground between a sequential scan and an index scan. Like an index scan, it scans an index to determine exactly what data it needs to fetch, but like a sequential scan, it takes advantage of data being easier to read in bulk.* (important fields: **Index Cond**)

For more details, read [explain](https://pganalyze.com/docs/explain)

## Contents

1. [Prepara Data](docs/prepare-data.md)
1. [EXPLAIN](docs/explain.md)
1. [Example 01: Reduce seq scan + rows removed by filter by adding index](docs/performance-tuning-example-01.md)
1. [Example 02: Multicolumn index + row-wise comparison](docs/performance-tuning-example-02.md)
1. [Example 03: Reduce seq scan by adding index](docs/performance-tuning-example-03.md)

# References
1. [Distinguishing Access and Filter-Predicates](https://use-the-index-luke.com/sql/explain-plan/postgresql/filter-predicates)
1. [Postgres choosing a filter instead of index cond when OR is involved](https://dba.stackexchange.com/questions/241591/postgres-choosing-a-filter-instead-of-index-cond-when-or-is-involved)
1. [Row-wise comparison](https://www.postgresql.org/docs/current/functions-comparisons.html#ROW-WISE-COMPARISON)
1. [pganalyze](https://pganalyze.com/docs/)
1. [multicolumn index](https://www.postgresql.org/docs/current/indexes-multicolumn.html)
1. [Using EXPLAIN](https://www.postgresql.org/docs/current/using-explain.html)
